{"version":3,"sources":["../../../../node_modules/%40mui/system/esm/RtlProvider/index.js","../../../../node_modules/%40mui/styled-engine/esm/GlobalStyles/GlobalStyles.js","../../../../node_modules/%40mui/system/esm/GlobalStyles/GlobalStyles.js","../../../../node_modules/%40mui/material/esm/styles/useTheme.js","../../../../node_modules/%40mui/material/esm/zero-styled/index.js","../../../../node_modules/%40mui/material/esm/GlobalStyles/GlobalStyles.js","../../../../app/contexts/DivePlannerContext.tsx","../../../../app/utility/utility.ts","../../../../app/dive-planner-service/BreathingGas.ts","../../../../app/utility/formatters.ts","../../../../app/dive-planner-service/DiveSegment.ts","../../../../app/dive-planner-service/DiveSegmentFactory.service.ts","../../../../app/dive-planner-service/Tissue.ts","../../../../app/dive-planner-service/BuhlmannZHL16C.ts","../../../../app/dive-planner-service/DiveProfile.ts","../../../../app/dive-planner-service/ChartGenerator.service.ts","../../../../app/dive-planner-service/DivePlannerService.ts","../../../../app/dive-planner-service/DiveSettings.service.ts"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst RtlContext = /*#__PURE__*/React.createContext();\nfunction RtlProvider({\n  value,\n  ...props\n}) {\n  return /*#__PURE__*/_jsx(RtlContext.Provider, {\n    value: value ?? true,\n    ...props\n  });\n}\nprocess.env.NODE_ENV !== \"production\" ? RtlProvider.propTypes = {\n  children: PropTypes.node,\n  value: PropTypes.bool\n} : void 0;\nexport const useRtl = () => {\n  const value = React.useContext(RtlContext);\n  return value ?? false;\n};\nexport default RtlProvider;","'use client';\n\nimport PropTypes from 'prop-types';\nimport { Global } from '@emotion/react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction isEmpty(obj) {\n  return obj === undefined || obj === null || Object.keys(obj).length === 0;\n}\nexport default function GlobalStyles(props) {\n  const {\n    styles,\n    defaultTheme = {}\n  } = props;\n  const globalStyles = typeof styles === 'function' ? themeInput => styles(isEmpty(themeInput) ? defaultTheme : themeInput) : styles;\n  return /*#__PURE__*/_jsx(Global, {\n    styles: globalStyles\n  });\n}\nprocess.env.NODE_ENV !== \"production\" ? GlobalStyles.propTypes = {\n  defaultTheme: PropTypes.object,\n  styles: PropTypes.oneOfType([PropTypes.array, PropTypes.string, PropTypes.object, PropTypes.func])\n} : void 0;","'use client';\n\nimport PropTypes from 'prop-types';\nimport { GlobalStyles as MuiGlobalStyles, internal_serializeStyles as serializeStyles } from '@mui/styled-engine';\nimport useTheme from \"../useTheme/index.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction wrapGlobalLayer(styles) {\n  const serialized = serializeStyles(styles);\n  if (styles !== serialized && serialized.styles) {\n    if (!serialized.styles.match(/^@layer\\s+[^{]*$/)) {\n      // If the styles are not already wrapped in a layer, wrap them in a global layer.\n      serialized.styles = `@layer global{${serialized.styles}}`;\n    }\n    return serialized;\n  }\n  return styles;\n}\nfunction GlobalStyles({\n  styles,\n  themeId,\n  defaultTheme = {}\n}) {\n  const upperTheme = useTheme(defaultTheme);\n  const resolvedTheme = themeId ? upperTheme[themeId] || upperTheme : upperTheme;\n  let globalStyles = typeof styles === 'function' ? styles(resolvedTheme) : styles;\n  if (resolvedTheme.modularCssLayers) {\n    if (Array.isArray(globalStyles)) {\n      globalStyles = globalStyles.map(styleArg => {\n        if (typeof styleArg === 'function') {\n          return wrapGlobalLayer(styleArg(resolvedTheme));\n        }\n        return wrapGlobalLayer(styleArg);\n      });\n    } else {\n      globalStyles = wrapGlobalLayer(globalStyles);\n    }\n  }\n  return /*#__PURE__*/_jsx(MuiGlobalStyles, {\n    styles: globalStyles\n  });\n}\nprocess.env.NODE_ENV !== \"production\" ? GlobalStyles.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │ To update them, edit the TypeScript types and run `pnpm proptypes`. │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * @ignore\n   */\n  defaultTheme: PropTypes.object,\n  /**\n   * @ignore\n   */\n  styles: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.array, PropTypes.func, PropTypes.number, PropTypes.object, PropTypes.string, PropTypes.bool]),\n  /**\n   * @ignore\n   */\n  themeId: PropTypes.string\n} : void 0;\nexport default GlobalStyles;","'use client';\n\nimport * as React from 'react';\nimport { useTheme as useThemeSystem } from '@mui/system';\nimport defaultTheme from \"./defaultTheme.js\";\nimport THEME_ID from \"./identifier.js\";\nexport default function useTheme() {\n  const theme = useThemeSystem(defaultTheme);\n  if (process.env.NODE_ENV !== 'production') {\n    // TODO: uncomment once we enable eslint-plugin-react-compiler // eslint-disable-next-line react-compiler/react-compiler\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue(theme);\n  }\n  return theme[THEME_ID] || theme;\n}","import { extendSxProp } from '@mui/system/styleFunctionSx';\nimport useTheme from \"../styles/useTheme.js\";\nimport GlobalStyles from \"../GlobalStyles/index.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport { css, keyframes } from '@mui/system';\nexport { default as styled } from \"../styles/styled.js\";\nexport function globalCss(styles) {\n  return function GlobalStylesWrapper(props) {\n    return (\n      /*#__PURE__*/\n      // Pigment CSS `globalCss` support callback with theme inside an object but `GlobalStyles` support theme as a callback value.\n      _jsx(GlobalStyles, {\n        styles: typeof styles === 'function' ? theme => styles({\n          theme,\n          ...props\n        }) : styles\n      })\n    );\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport function internal_createExtendSxProp() {\n  return extendSxProp;\n}\nexport { useTheme };","'use client';\n\nimport PropTypes from 'prop-types';\nimport { GlobalStyles as SystemGlobalStyles } from '@mui/system';\nimport defaultTheme from \"../styles/defaultTheme.js\";\nimport THEME_ID from \"../styles/identifier.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction GlobalStyles(props) {\n  return /*#__PURE__*/_jsx(SystemGlobalStyles, {\n    ...props,\n    defaultTheme: defaultTheme,\n    themeId: THEME_ID\n  });\n}\nprocess.env.NODE_ENV !== \"production\" ? GlobalStyles.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The styles you want to apply globally.\n   */\n  styles: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.array, PropTypes.func, PropTypes.number, PropTypes.object, PropTypes.string, PropTypes.bool])\n} : void 0;\nexport default GlobalStyles;","'use client';\n\nimport React, { createContext, useContext, useState, useMemo, useCallback, ReactNode } from 'react';\nimport { DivePlannerService } from '../dive-planner-service/DivePlannerService';\nimport { DiveSettingsService } from '../dive-planner-service/DiveSettings.service';\nimport { BreathingGas } from '../dive-planner-service/BreathingGas';\n\ninterface DivePlannerContextType {\n  divePlanner: DivePlannerService;\n  updateTrigger: number;\n  forceUpdate: () => void;\n  updateSetting: (key: string, value: number | boolean) => void;\n}\n\nconst DivePlannerContext = createContext<DivePlannerContextType | undefined>(undefined);\n\nexport function DivePlannerProvider({ children }: { children: ReactNode }) {\n  const [updateTrigger, setUpdateTrigger] = useState(0);\n  \n  const divePlanner = useMemo(() => {\n    const settings = new DiveSettingsService();\n    return new DivePlannerService(settings);\n  }, []);\n\n  const forceUpdate = useCallback(() => {\n    setUpdateTrigger(prev => prev + 1);\n  }, []);\n\n  const updateSetting = useCallback((key: string, value: number | boolean) => {\n    const settings = divePlanner.settings;\n    switch (key) {\n      case 'descentRate':\n        settings.descentRate = value as number;\n        break;\n      case 'ascentRate':\n        settings.ascentRate = value as number;\n        break;\n      case 'isOxygenNarcotic':\n        settings.isOxygenNarcotic = value as boolean;\n        break;\n      case 'workingPO2Maximum':\n        settings.workingPO2Maximum = value as number;\n        break;\n      case 'decoPO2Maximum':\n        settings.decoPO2Maximum = value as number;\n        break;\n      case 'pO2Minimum':\n        settings.pO2Minimum = value as number;\n        break;\n      case 'ENDErrorThreshold':\n        settings.ENDErrorThreshold = value as number;\n        break;\n    }\n    setUpdateTrigger(prev => prev + 1);\n  }, [divePlanner]);\n\n  const value = useMemo(() => ({\n    divePlanner,\n    updateTrigger,\n    forceUpdate,\n    updateSetting,\n  }), [divePlanner, updateTrigger, forceUpdate, updateSetting]);\n\n  return (\n    <DivePlannerContext.Provider value={value}>\n      {children}\n    </DivePlannerContext.Provider>\n  );\n}\n\nexport function useDivePlanner() {\n  const context = useContext(DivePlannerContext);\n  if (context === undefined) {\n    throw new Error('useDivePlanner must be used within a DivePlannerProvider');\n  }\n  return context;\n}\n\n// Hook for starting a dive\nexport function useStartDive() {\n  const { divePlanner, forceUpdate } = useDivePlanner();\n  \n  return useCallback((startGas: BreathingGas) => {\n    divePlanner.startDive(startGas);\n    forceUpdate();\n  }, [divePlanner, forceUpdate]);\n}\n\n// Hook for adding a change depth segment\nexport function useAddChangeDepthSegment() {\n  const { divePlanner, forceUpdate } = useDivePlanner();\n  \n  return useCallback((newDepth: number) => {\n    divePlanner.addChangeDepthSegment(newDepth);\n    forceUpdate();\n  }, [divePlanner, forceUpdate]);\n}\n\n// Hook for adding a change gas segment\nexport function useAddChangeGasSegment() {\n  const { divePlanner, forceUpdate } = useDivePlanner();\n  \n  return useCallback((newGas: BreathingGas) => {\n    divePlanner.addChangeGasSegment(newGas);\n    forceUpdate();\n  }, [divePlanner, forceUpdate]);\n}\n\n// Hook for adding a maintain depth segment\nexport function useAddMaintainDepthSegment() {\n  const { divePlanner, forceUpdate } = useDivePlanner();\n  \n  return useCallback((timeAtDepth: number) => {\n    divePlanner.addMaintainDepthSegment(timeAtDepth);\n    forceUpdate();\n  }, [divePlanner, forceUpdate]);\n}\n","export function ceilingWithThreshold(ceiling: number, threshold: number = 0.000001): number {\n  return Math.ceil(ceiling - threshold);\n}\n\nexport function floorWithThreshold(floor: number, threshold: number = 0.000001): number {\n  return Math.floor(floor + threshold);\n}\n","import { ceilingWithThreshold, floorWithThreshold } from '../utility/utility';\nimport { DiveSettingsService } from './DiveSettings.service';\n\nexport class BreathingGas {\n  description!: string;\n  compositionDescription!: string;\n  maxDepthPO2!: number;\n  maxDepthPO2Deco!: number;\n  maxDepthEND!: number;\n  minDepth!: number;\n  maxDecoDepth!: number;\n\n  private constructor(\n    public name: string,\n    public oxygen: number,\n    public helium: number,\n    public nitrogen: number,\n    private diveSettings: DiveSettingsService\n  ) {\n    this.diveSettings.subscribeToChanges(() => this.onDiveSettingsChanged());\n\n    this.updateDetails();\n  }\n\n  onDiveSettingsChanged(): void {\n    this.updateDetails();\n  }\n\n  static create(oxygen: number, helium: number, nitrogen: number, settings: DiveSettingsService): BreathingGas {\n    const gas = new BreathingGas('Custom', oxygen, helium, nitrogen, settings);\n\n    const standardGas = BreathingGas.StandardGases.find(g => g.isEquivalent(gas));\n    if (standardGas !== undefined) {\n      return new BreathingGas(standardGas.name, standardGas.oxygen, standardGas.helium, standardGas.nitrogen, settings);\n    }\n\n    return gas;\n  }\n\n  updateDetails(): void {\n    this.description = this.calcDescription();\n    this.compositionDescription = this.calcCompositionDescription();\n    this.maxDepthPO2 = this.calcMaxDepthPO2();\n    this.maxDepthPO2Deco = this.calcMaxDepthPO2Deco();\n    this.maxDepthEND = this.calcMaxDepthEND();\n    this.minDepth = this.calcMinDepth();\n    this.maxDecoDepth = this.calcMaxDecoDepth();\n  }\n\n  static StandardGases: BreathingGas[];\n\n  static GenerateStandardGases(settings: DiveSettingsService) {\n    this.StandardGases = [\n      new BreathingGas('Air', 21, 0, 79, settings),\n      new BreathingGas('Nitrox 32', 32, 0, 68, settings),\n      new BreathingGas('Oxygen', 100, 0, 0, settings),\n      new BreathingGas('Helitrox 25/25', 25, 25, 50, settings),\n      new BreathingGas('Helitrox 21/35', 21, 35, 44, settings),\n      new BreathingGas('Trimix 18/45', 18, 45, 37, settings),\n      new BreathingGas('Trimix 15/55', 15, 55, 30, settings),\n      new BreathingGas('Trimix 12/60', 12, 60, 28, settings),\n      new BreathingGas('Trimix 10/70', 10, 70, 20, settings),\n      new BreathingGas('Nitrox 50', 50, 0, 50, settings),\n      new BreathingGas('Helitrox 35/25', 35, 25, 40, settings),\n    ];\n  }\n\n  static getOptimalDecoGas(depth: number, settings: DiveSettingsService): BreathingGas {\n    const atm = depth / 10 + 1;\n    const oxygen = Math.min(100, floorWithThreshold((settings.decoPO2Maximum * 100) / atm));\n\n    let targetPN2 = (settings.ENDErrorThreshold / 10 + 1) * 79;\n\n    if (settings.isOxygenNarcotic) {\n      const targetNarcotic = (settings.ENDErrorThreshold / 10 + 1) * 100;\n      targetPN2 = targetNarcotic - oxygen * atm;\n    }\n\n    let nitrogen = targetPN2 / atm;\n    const helium = Math.max(0, ceilingWithThreshold(100 - oxygen - nitrogen));\n    nitrogen = 100 - oxygen - helium;\n\n    return BreathingGas.create(oxygen, helium, nitrogen, settings);\n  }\n\n  private calcDescription(): string {\n    return `${this.name} (${this.calcCompositionDescription()})`;\n  }\n\n  private calcCompositionDescription(): string {\n    return `O<sub>2</sub>: ${this.oxygen}%, He: ${this.helium}%, N<sub>2</sub>: ${this.nitrogen}%`;\n  }\n\n  private calcMaxDepthPO2(): number {\n    return Math.floor((this.diveSettings.workingPO2Maximum * 1000) / this.oxygen - 10);\n  }\n\n  private calcMaxDepthPO2Deco(): number {\n    return Math.floor((this.diveSettings.decoPO2Maximum * 1000) / this.oxygen - 10);\n  }\n\n  private calcMaxDepthEND(): number {\n    if (this.diveSettings.isOxygenNarcotic) {\n      return Math.floor(((this.diveSettings.ENDErrorThreshold + 10) * 100) / (this.nitrogen + this.oxygen) - 10);\n    } else {\n      return Math.floor((790 * ((this.diveSettings.ENDErrorThreshold + 10) / 10)) / this.nitrogen - 10);\n    }\n  }\n\n  private calcMinDepth(): number {\n    return Math.max(0, ceilingWithThreshold((this.diveSettings.pO2Minimum * 1000) / this.oxygen - 10));\n  }\n\n  private calcMaxDecoDepth(): number {\n    return Math.min(this.calcMaxDepthPO2Deco(), this.calcMaxDepthEND());\n  }\n\n  getPO2(depth: number): number {\n    return (depth / 10 + 1) * (this.oxygen / 100);\n  }\n\n  getPHe(depth: number): number {\n    return (depth / 10 + 1) * (this.helium / 100);\n  }\n\n  getPN2(depth: number): number {\n    return (depth / 10 + 1) * (this.nitrogen / 100);\n  }\n\n  getEND(depth: number): number {\n    if (this.diveSettings.isOxygenNarcotic) {\n      return Math.max(0, (this.getPN2(depth) + this.getPO2(depth) - 1) * 10);\n    }\n\n    return Math.max(0, (this.getPN2(depth) / 0.79 - 1) * 10);\n  }\n\n  isEquivalent(other: BreathingGas): boolean {\n    return this.oxygen === other.oxygen && this.helium === other.helium && this.nitrogen === other.nitrogen;\n  }\n}\n","export function humanDuration(value: number): string {\n  const minutes = Math.floor(value / 60);\n  const seconds = Math.round(value % 60);\n\n  let result = `${minutes > 0 ? minutes + ' min' : ''}${seconds > 0 ? ' ' + seconds + ' sec' : ''}`;\n\n  result = result.trim();\n\n  if (minutes + seconds === 0) {\n    result = '0 sec ';\n  }\n\n  return result;\n}\n\nexport function colonDuration(value: number): string {\n  const hours = Math.floor(value / 3600);\n  const minutes = Math.floor((value - hours * 3600) / 60);\n  const seconds = Math.floor(value % 60);\n\n  let result = '';\n\n  if (hours > 0) {\n    result += hours + ':';\n    result += minutes < 10 ? '0' + minutes : minutes;\n    result += ':';\n  } else {\n    result += minutes + ':';\n  }\n\n  result += seconds < 10 ? '0' + seconds : seconds;\n\n  return result;\n}\n","import { BreathingGas } from './BreathingGas';\nimport { DiveSettingsService } from './DiveSettings.service';\n\nexport class DiveSegment {\n  constructor(\n    public StartTimestamp: number,\n    public EndTimestamp: number,\n    public Title: string,\n    public Description: string,\n    public StartDepth: number,\n    public EndDepth: number,\n    public Gas: BreathingGas,\n    public Icon: string,\n    private settings: DiveSettingsService\n  ) {}\n\n  clone(): DiveSegment {\n    return new DiveSegment(\n      this.StartTimestamp,\n      this.EndTimestamp,\n      this.Title,\n      this.Description,\n      this.StartDepth,\n      this.EndDepth,\n      this.Gas,\n      this.Icon,\n      this.settings\n    );\n  }\n\n  getDuration(): number {\n    return this.EndTimestamp - this.StartTimestamp;\n  }\n\n  getAverageDepth(): number {\n    if (this.StartDepth === this.EndDepth) {\n      return this.StartDepth;\n    }\n\n    const travelAverageDepth = (this.StartDepth + this.EndDepth) / 2;\n    const travelTime = this.getTravelDuration();\n    const bottomTime = this.getDuration() - travelTime;\n\n    return (travelAverageDepth * travelTime + this.EndDepth * bottomTime) / this.getDuration();\n  }\n\n  getDepth(time: number): number {\n    if (time <= this.StartTimestamp) {\n      return this.StartDepth;\n    }\n\n    if (time >= this.EndTimestamp) {\n      return this.EndDepth;\n    }\n\n    const travelEnd = this.StartTimestamp + this.getTravelDuration();\n\n    if (time >= travelEnd) {\n      return this.EndDepth;\n    }\n\n    return this.StartDepth + ((this.EndDepth - this.StartDepth) * (time - this.StartTimestamp)) / (travelEnd - this.StartTimestamp);\n  }\n\n  private getTravelDuration(): number {\n    if (this.StartDepth === this.EndDepth) {\n      return 0;\n    }\n\n    if (this.StartDepth < this.EndDepth) {\n      const descentRatePerMeter = 60 / this.settings.descentRate;\n      return Math.round((this.EndDepth - this.StartDepth) * descentRatePerMeter);\n    }\n\n    if (this.EndDepth < this.StartDepth) {\n      const ascentRatePerMeter = 60 / this.settings.ascentRate;\n      return Math.round((this.StartDepth - this.EndDepth) * ascentRatePerMeter);\n    }\n\n    return 0; // should never happen\n  }\n}\n","import { humanDuration } from '../utility/formatters';\nimport { DiveSegment } from './DiveSegment';\nimport { BreathingGas } from './BreathingGas';\nimport { DiveSettingsService } from './DiveSettings.service';\n\nexport class DiveSegmentFactoryService {\n  constructor(\n    private settings: DiveSettingsService\n  ) {}\n\n  createEndDiveSegment(startTime: number, depth: number, gas: BreathingGas): DiveSegment {\n    const ascentTime = this.getTravelTime(depth, 0);\n    const ascentTimeDuration = humanDuration(ascentTime);\n    const endTime = startTime + ascentTime;\n\n    return new DiveSegment(\n      startTime,\n      endTime,\n      'Surface',\n      `Ascent time: ${ascentTimeDuration} @ ${this.settings.ascentRate}m/min`,\n      depth,\n      0,\n      gas,\n      'done',\n      this.settings\n    );\n  }\n\n  createStartDiveSegment(gas: BreathingGas): DiveSegment {\n    return new DiveSegment(0, 0, 'Start Dive', gas.description, 0, 0, gas, 'scuba_diving', this.settings);\n  }\n\n  createDepthChangeSegment(startTime: number, previousDepth: number, newDepth: number, gas: BreathingGas) {\n    const travelTime = this.getTravelTime(previousDepth, newDepth);\n    const endTime = startTime + travelTime;\n    const title = newDepth > previousDepth ? `Descend to ${newDepth}m` : `Ascend to ${newDepth}m`;\n    const description =\n      newDepth > previousDepth\n        ? `Descent time: ${humanDuration(travelTime)} @ ${this.settings.descentRate}m/min`\n        : `Ascent time: ${humanDuration(travelTime)} @ ${this.settings.ascentRate}m/min`;\n    const icon = newDepth > previousDepth ? 'arrow_downward' : 'arrow_upward';\n\n    return new DiveSegment(startTime, endTime, title, description, previousDepth, newDepth, gas, icon, this.settings);\n  }\n\n  createGasChangeSegment(startTime: number, newGas: BreathingGas, depth: number) {\n    const title = 'Switch Gas';\n    const description = newGas.description;\n\n    return new DiveSegment(startTime, startTime, title, description, depth, depth, newGas, 'air', this.settings);\n  }\n\n  createMaintainDepthSegment(startTime: number, depth: number, duration: number, gas: BreathingGas) {\n    const endTime = startTime + duration;\n    const title = `Maintain Depth at ${depth}m`;\n    const description = `Time: ${humanDuration(duration)}`;\n    const icon = 'arrow_forward';\n\n    return new DiveSegment(startTime, endTime, title, description, depth, depth, gas, icon, this.settings);\n  }\n\n  getTravelTime(previousDepth: number, newDepth: number): number {\n    if (newDepth > previousDepth) {\n      return Math.round((newDepth - previousDepth) * (60 / this.settings.descentRate));\n    } else {\n      return Math.round((previousDepth - newDepth) * (60 / this.settings.ascentRate));\n    }\n  }\n}\n","import { ceilingWithThreshold } from '../utility/utility';\nimport { BreathingGas } from './BreathingGas';\nimport { DiveSegment } from './DiveSegment';\n\nexport class Tissue {\n  private tissueByTime: Map<number, { PN2: number; PHe: number }> = new Map();\n  private n2DeltaMultiplier: number = 0;\n  private heDeltaMultiplier: number = 0;\n\n  constructor(\n    public tissueNumber: number,\n    public n2HalfLife: number,\n    public a_n2: number,\n    public b_n2: number,\n    public heHalfLife: number,\n    public a_he: number,\n    public b_he: number\n  ) {\n    this.tissueByTime.set(0, {\n      PN2: this.ENVIRONMENT_PN2,\n      PHe: this.ENVIRONMENT_PHE,\n    });\n    this.n2DeltaMultiplier = 1 - Math.pow(2, -(1 / (n2HalfLife * 60)));\n    this.heDeltaMultiplier = 1 - Math.pow(2, -(1 / (heHalfLife * 60)));\n  }\n\n  readonly ENVIRONMENT_PN2 = 0.79;\n  readonly ENVIRONMENT_PHE = 0.0;\n  readonly MAX_NDL = 3600 * 5;\n\n  calculateForSegment(segment: DiveSegment) {\n    for (let t = segment.StartTimestamp; t <= segment.EndTimestamp; t++) {\n      const prevN2 = this.getTissueByTime(t - 1).PN2;\n      const gasN2 = segment.Gas.getPN2(segment.getDepth(t));\n      const n2Delta = this.getPN2Delta(prevN2, gasN2);\n\n      const prevHe = this.getTissueByTime(t - 1).PHe;\n      const gasHe = segment.Gas.getPHe(segment.getDepth(t));\n      const heDelta = this.getPHeDelta(prevHe, gasHe);\n\n      this.tissueByTime.set(t, {\n        PN2: prevN2 + n2Delta,\n        PHe: prevHe + heDelta,\n      });\n    }\n  }\n\n  discardAfterTime(time: number) {\n    this.tissueByTime = new Map(Array.from(this.tissueByTime.entries()).filter(([key]) => key <= time));\n  }\n\n  clone(): Tissue {\n    const clone = new Tissue(this.tissueNumber, this.n2HalfLife, this.a_n2, this.b_n2, this.heHalfLife, this.a_he, this.b_he);\n    clone.tissueByTime = new Map(this.tissueByTime);\n    return clone;\n  }\n\n  getInstantCeiling(time: number): number {\n    const result = (this.getMValue(time) - 1) * 10;\n    return result < 0 ? 0 : result;\n  }\n\n  getTimeToInstantCeiling(depth: number, gas: BreathingGas): number | undefined {\n    const ceiling = this.getInstantCeiling(this.tissueByTime.size - 1);\n\n    if (ceiling > 0) {\n      return 0;\n    }\n\n    const minCeiling = this.getInstantCeilingByPressures(gas.getPN2(depth), gas.getPHe(depth));\n\n    if (minCeiling === 0 || isNaN(minCeiling)) {\n      return undefined;\n    }\n\n    const pN2 = this.getPN2(this.tissueByTime.size - 1);\n    const pHe = this.getPHe(this.tissueByTime.size - 1);\n\n    let minNDL = 0;\n    let maxNDL = this.MAX_NDL;\n    let time = (maxNDL - minNDL) / 2;\n\n    while (minNDL < maxNDL) {\n      const newPN2 = pN2 + this.getPN2DeltaByTime(pN2, gas.getPN2(depth), time);\n      const newPHe = pHe + this.getPHeDeltaByTime(pHe, gas.getPHe(depth), time);\n      const newCeiling = this.getInstantCeilingByPressures(newPN2, newPHe);\n\n      if (newCeiling <= 0) {\n        minNDL = time;\n      } else {\n        maxNDL = time - 1;\n      }\n\n      time = ceilingWithThreshold((maxNDL - minNDL) / 2) + minNDL;\n    }\n\n    if (time >= this.MAX_NDL) {\n      return undefined;\n    }\n\n    return Math.floor(time);\n  }\n\n  getPN2(time: number): number {\n    return this.getTissueByTime(time).PN2;\n  }\n\n  getPHe(time: number): number {\n    return this.getTissueByTime(time).PHe;\n  }\n\n  private getInstantCeilingByPressures(pN2: number, pHe: number): number {\n    const result = (this.getMValueByPressures(pN2, pHe) - 1) * 10;\n    return result < 0 ? 0 : result;\n  }\n\n  private getTissueByTime(time: number): { PN2: number; PHe: number } {\n    return this.tissueByTime.get(time) ?? { PN2: 0, PHe: 0 };\n  }\n\n  private getPN2Delta(tissuePN2: number, gasPN2: number): number {\n    return this.getTissueDelta(tissuePN2, gasPN2, this.n2DeltaMultiplier);\n  }\n\n  private getPN2DeltaByTime(tissuePN2: number, gasPN2: number, time: number): number {\n    return this.getTissueDeltaByTime(tissuePN2, gasPN2, this.n2HalfLife, time);\n  }\n\n  private getPHeDelta(tissuePHe: number, gasPHe: number): number {\n    return this.getTissueDelta(tissuePHe, gasPHe, this.heDeltaMultiplier);\n  }\n\n  private getPHeDeltaByTime(tissuePHe: number, gasPHe: number, time: number): number {\n    return this.getTissueDeltaByTime(tissuePHe, gasPHe, this.heHalfLife, time);\n  }\n\n  private getTissueDelta(tissuePartialPressure: number, gasPartialPressure: number, deltaMultiplier: number): number {\n    return (gasPartialPressure - tissuePartialPressure) * deltaMultiplier;\n  }\n\n  private getTissueDeltaByTime(tissuePartialPressure: number, gasPartialPressure: number, halflife: number, time: number): number {\n    return (gasPartialPressure - tissuePartialPressure) * (1 - Math.pow(2, -(time / (halflife * 60))));\n  }\n\n  private getAByPressures(pN2: number, pHe: number): number {\n    return (pN2 * this.a_n2 + pHe * this.a_he) / (pN2 + pHe);\n  }\n\n  private getBByPressures(pN2: number, pHe: number): number {\n    return (pN2 * this.b_n2 + pHe * this.b_he) / (pN2 + pHe);\n  }\n\n  private getMValue(time: number): number {\n    return this.getMValueByPressures(this.getPN2(time), this.getPHe(time));\n  }\n\n  private getMValueByPressures(pN2: number, pHe: number): number {\n    return (pN2 + pHe - this.getAByPressures(pN2, pHe)) * this.getBByPressures(pN2, pHe);\n  }\n}\n","import { BreathingGas } from './BreathingGas';\nimport { DiveSegment } from './DiveSegment';\nimport { Tissue } from './Tissue';\n\nexport class BuhlmannZHL16C {\n  private tissues: Tissue[] = [];\n\n  constructor() {\n    this.tissues.push(new Tissue(1, 5, 1.1696, 0.5578, 1.51, 1.7474, 0.4245));\n    this.tissues.push(new Tissue(2, 8, 1.0, 0.6514, 3.02, 1.383, 0.5747));\n    this.tissues.push(new Tissue(3, 12.5, 0.8618, 0.7222, 4.72, 1.1919, 0.6257));\n    this.tissues.push(new Tissue(4, 18.5, 0.7562, 0.7825, 6.99, 1.0458, 0.7223));\n    this.tissues.push(new Tissue(5, 27, 0.62, 0.8126, 10.21, 0.922, 0.7582));\n    this.tissues.push(new Tissue(6, 38.3, 0.5043, 0.8434, 14.48, 0.8205, 0.7957));\n    this.tissues.push(new Tissue(7, 54.3, 0.441, 0.8693, 20.53, 0.7305, 0.8279));\n    this.tissues.push(new Tissue(8, 77, 0.4, 0.891, 29.11, 0.6502, 0.8553));\n    this.tissues.push(new Tissue(9, 109, 0.375, 0.9092, 41.2, 0.595, 0.8757));\n    this.tissues.push(new Tissue(10, 146, 0.35, 0.9222, 55.19, 0.5545, 0.8903));\n    this.tissues.push(new Tissue(11, 187, 0.3295, 0.9319, 70.69, 0.5333, 0.8997));\n    this.tissues.push(new Tissue(12, 239, 0.3065, 0.9403, 90.34, 0.5189, 0.9073));\n    this.tissues.push(new Tissue(13, 305, 0.2835, 0.9477, 115.29, 0.5181, 0.9122));\n    this.tissues.push(new Tissue(14, 390, 0.261, 0.9544, 147.42, 0.5176, 0.9171));\n    this.tissues.push(new Tissue(15, 498, 0.248, 0.9602, 188.24, 0.5172, 0.9217));\n    this.tissues.push(new Tissue(16, 635, 0.2327, 0.9653, 240.03, 0.5119, 0.9267));\n  }\n\n  clone(): BuhlmannZHL16C {\n    const result = new BuhlmannZHL16C();\n    result.tissues = this.tissues.map(t => t.clone());\n    return result;\n  }\n\n  discardAfterTime(time: number) {\n    this.tissues.forEach(t => t.discardAfterTime(time));\n  }\n\n  calculateForSegment(segment: DiveSegment) {\n    this.tissues.forEach(t => t.calculateForSegment(segment));\n  }\n\n  getInstantCeiling(time: number): number {\n    return Math.max(...this.tissues.map(t => t.getInstantCeiling(time)));\n  }\n\n  getTimeToInstantCeiling(depth: number, gas: BreathingGas): number | undefined {\n    const tissueNdls = this.tissues.map(t => t.getTimeToInstantCeiling(depth, gas));\n    const validNdls = tissueNdls.filter(x => x !== undefined) as number[];\n\n    if (validNdls.length === 0) return undefined;\n\n    return Math.min(...validNdls);\n  }\n\n  getTissueInstantCeiling(time: number, tissue: number): number {\n    return this.tissues[tissue - 1].getInstantCeiling(time);\n  }\n\n  getTissuePN2(time: number, tissue: number): number {\n    return this.tissues[tissue - 1].getPN2(time);\n  }\n\n  getTissuePHe(time: number, tissue: number): number {\n    return this.tissues[tissue - 1].getPHe(time);\n  }\n}\n","import { ceilingWithThreshold } from '../utility/utility';\nimport { BreathingGas } from './BreathingGas';\nimport { BuhlmannZHL16C } from './BuhlmannZHL16C';\nimport { DiveSegment } from './DiveSegment';\nimport { DiveSegmentFactoryService } from './DiveSegmentFactory.service';\nimport { DiveSettingsService } from './DiveSettings.service';\n\nexport class DiveProfile {\n  public segments: DiveSegment[] = [];\n  public algo: BuhlmannZHL16C = new BuhlmannZHL16C();\n\n  readonly MAX_NDL = 3600 * 5;\n\n  constructor(\n    private diveSettings: DiveSettingsService,\n    private diveSegmentFactory: DiveSegmentFactoryService\n  ) {}\n\n  addDiveSegment(newDepth: number, newGas: BreathingGas, timeAtDepth: number): void {\n    this.removeLastSegment();\n\n    const previousSegment = this.getLastSegment();\n    let startTime = previousSegment.EndTimestamp;\n\n    if (newDepth !== previousSegment.EndDepth) {\n      this.addSegment(this.diveSegmentFactory.createDepthChangeSegment(startTime, previousSegment.EndDepth, newDepth, previousSegment.Gas));\n      startTime = this.getTotalTime();\n    }\n\n    if (!previousSegment.Gas.isEquivalent(newGas)) {\n      this.addSegment(this.diveSegmentFactory.createGasChangeSegment(startTime, newGas, newDepth));\n    }\n\n    if (timeAtDepth > 0) {\n      this.addSegment(this.diveSegmentFactory.createMaintainDepthSegment(startTime, newDepth, timeAtDepth, newGas));\n      startTime = this.getTotalTime();\n    }\n\n    this.addSegment(this.diveSegmentFactory.createEndDiveSegment(startTime, newDepth, newGas));\n  }\n\n  addChangeDepthSegment(newDepth: number): void {\n    this.removeLastSegment();\n    const previousSegment = this.getLastSegment();\n\n    this.addSegment(this.diveSegmentFactory.createDepthChangeSegment(previousSegment.EndTimestamp, previousSegment.EndDepth, newDepth, previousSegment.Gas));\n    this.addSegment(this.diveSegmentFactory.createEndDiveSegment(this.getTotalTime(), newDepth, previousSegment.Gas));\n  }\n\n  addChangeGasSegment(newGas: BreathingGas): void {\n    this.removeLastSegment();\n    const previousSegment = this.getLastSegment();\n\n    this.addSegment(this.diveSegmentFactory.createGasChangeSegment(previousSegment.EndTimestamp, newGas, previousSegment.EndDepth));\n    this.addSegment(this.diveSegmentFactory.createEndDiveSegment(this.getTotalTime(), previousSegment.EndDepth, newGas));\n  }\n\n  addMaintainDepthSegment(timeAtDepth: number): void {\n    this.removeLastSegment();\n    const previousSegment = this.getLastSegment();\n\n    this.addSegment(\n      this.diveSegmentFactory.createMaintainDepthSegment(previousSegment.EndTimestamp, previousSegment.EndDepth, timeAtDepth, previousSegment.Gas)\n    );\n    this.addSegment(this.diveSegmentFactory.createEndDiveSegment(this.getTotalTime(), previousSegment.EndDepth, previousSegment.Gas));\n  }\n\n  getCurrentDepth(): number {\n    return this.getPreviousSegment().EndDepth;\n  }\n\n  getTravelTime(newDepth: number): number {\n    return this.diveSegmentFactory.getTravelTime(this.getCurrentDepth(), newDepth);\n  }\n\n  startDive(startGas: BreathingGas): void {\n    this.addSegment(this.diveSegmentFactory.createStartDiveSegment(startGas));\n    this.addSegment(this.diveSegmentFactory.createEndDiveSegment(0, 0, startGas));\n  }\n\n  getCurrentGas(): BreathingGas {\n    return this.getPreviousSegment().Gas;\n  }\n\n  getCurrentDiveTime(): number {\n    return this.getPreviousSegment().EndTimestamp;\n  }\n\n  getCurrentInstantCeiling(): number {\n    const currentTime = this.getPreviousSegment().EndTimestamp;\n\n    return ceilingWithThreshold(this.algo.getInstantCeiling(currentTime));\n  }\n\n  getCurrentCeiling(): number {\n    const instantCeiling = this.getCurrentInstantCeiling();\n\n    if (this.getCurrentDepth() <= instantCeiling) {\n      return instantCeiling;\n    }\n\n    for (let t = this.getPreviousSegment().EndTimestamp; t <= this.getTotalTime(); t++) {\n      const ceiling = this.algo.getInstantCeiling(t);\n      const depth = this.getDepth(t);\n\n      if (depth < ceiling) {\n        return ceilingWithThreshold(this.getDepth(t - 1));\n      }\n    }\n\n    return 0;\n  }\n\n  getNewCeiling(newDepth: number, timeAtDepth: number): number {\n    const wipProfile = this.getWipProfile(newDepth, this.getPreviousSegment().Gas, timeAtDepth);\n\n    wipProfile.addSegment(this.diveSegmentFactory.createEndDiveSegment(wipProfile.getTotalTime(), newDepth, wipProfile.getLastSegment().Gas));\n\n    return wipProfile.getCurrentCeiling();\n  }\n\n  getNewInstantCeiling(newDepth: number, timeAtDepth: number): number {\n    const wipProfile = this.getWipProfile(newDepth, this.getPreviousSegment().Gas, timeAtDepth);\n\n    return ceilingWithThreshold(wipProfile.algo.getInstantCeiling(wipProfile.getTotalTime()));\n  }\n\n  getNoDecoLimit(newDepth: number, newGas: BreathingGas, timeAtDepth: number): number | undefined {\n    const wipProfile = this.getWipProfile(newDepth, newGas, timeAtDepth);\n\n    const ndl = wipProfile.algo.getTimeToInstantCeiling(newDepth, newGas);\n\n    if (ndl === undefined) {\n      return undefined;\n    }\n\n    wipProfile.addSegment(this.diveSegmentFactory.createMaintainDepthSegment(wipProfile.getTotalTime(), newDepth, ndl, newGas));\n\n    let minTime = 0;\n    let maxTime = 200;\n\n    if (!wipProfile.canSurfaceWithoutStops()) {\n      minTime = -ndl;\n    }\n\n    wipProfile.extendLastSegment(maxTime);\n\n    while (wipProfile.canSurfaceWithoutStops() && maxTime <= this.MAX_NDL) {\n      minTime = maxTime;\n      wipProfile.extendLastSegment(maxTime);\n      maxTime *= 2;\n    }\n\n    if (maxTime > this.MAX_NDL) {\n      return undefined;\n    }\n\n    maxTime--;\n    let time = ceilingWithThreshold((maxTime - minTime) / 2) + minTime;\n\n    wipProfile.shortenLastSegment(maxTime + 1 - time);\n\n    while (minTime < maxTime) {\n      if (wipProfile.canSurfaceWithoutStops()) {\n        minTime = time;\n        time = ceilingWithThreshold((maxTime - minTime) / 2) + minTime;\n        wipProfile.extendLastSegment(time - minTime);\n      } else {\n        maxTime = time - 1;\n        time = ceilingWithThreshold((maxTime - minTime) / 2) + minTime;\n        wipProfile.shortenLastSegment(maxTime + 1 - time);\n      }\n    }\n\n    return ndl + minTime;\n  }\n\n  // TODO: memoize this and only recalculate on the new segment bits\n  getCeilingError(): { amount: number; duration: number } {\n    let amount = 0;\n    let duration = 0;\n\n    for (let t = 0; t < this.getTotalTime(); t++) {\n      const ceiling = this.algo.getInstantCeiling(t);\n      const depth = this.getDepth(t);\n\n      if (depth < ceiling) {\n        amount = Math.max(amount, ceiling - depth);\n        duration++;\n      }\n    }\n\n    return { amount, duration };\n  }\n\n  getPO2Error(): { maxPO2: number; duration: number } {\n    let maxPO2 = 0;\n    let duration = 0;\n\n    for (let t = 0; t < this.getTotalTime(); t++) {\n      const pO2 = this.getPO2(t);\n\n      if (pO2 > this.diveSettings.decoPO2Maximum) {\n        maxPO2 = Math.max(maxPO2, pO2);\n        duration++;\n      }\n    }\n\n    return { maxPO2, duration };\n  }\n\n  getHypoxicError(): { minPO2: number; duration: number } {\n    let minPO2 = 999;\n    let duration = 0;\n\n    for (let t = 0; t < this.getTotalTime(); t++) {\n      const pO2 = this.getPO2(t);\n\n      if (pO2 < this.diveSettings.pO2Minimum) {\n        minPO2 = Math.min(minPO2, pO2);\n        duration++;\n      }\n    }\n\n    return { minPO2, duration };\n  }\n\n  getENDError(): { end: number; duration: number } {\n    let maxEND = 0;\n    let duration = 0;\n\n    for (let t = 0; t < this.getTotalTime(); t++) {\n      const end = this.getEND(t);\n\n      if (end > this.diveSettings.ENDErrorThreshold) {\n        maxEND = Math.max(end, maxEND);\n        duration++;\n      }\n    }\n\n    return { end: maxEND, duration };\n  }\n\n  getMaxDepth(): number {\n    return Math.max(...this.segments.map(x => x.EndDepth));\n  }\n\n  getAverageDepth(): number {\n    if (this.getTotalTime() === 0) return 0;\n    return this.segments.reduce((sum, current) => sum + current.getAverageDepth() * current.getDuration(), 0) / this.getTotalTime();\n  }\n\n  getTotalTime(): number {\n    if (this.segments.length === 0) return 0;\n\n    return this.getLastSegment().EndTimestamp;\n  }\n\n  addSegment(segment: DiveSegment): void {\n    this.segments.push(segment);\n    this.algo.calculateForSegment(segment);\n  }\n\n  getLastSegment(): DiveSegment {\n    return this.segments[this.segments.length - 1];\n  }\n\n  getCurrentProfile(): DiveProfile {\n    const result = this.clone();\n    result.removeLastSegment();\n\n    return result;\n  }\n\n  getPO2(time: number): number {\n    return this.getGas(time).getPO2(this.getDepth(time));\n  }\n\n  getPN2(time: number): number {\n    return this.getGas(time).getPN2(this.getDepth(time));\n  }\n\n  getPHe(time: number): number {\n    return this.getGas(time).getPHe(this.getDepth(time));\n  }\n\n  private removeLastSegment(): void {\n    this.segments.pop();\n    this.algo.discardAfterTime(this.getTotalTime());\n  }\n\n  private extendLastSegment(time: number): void {\n    this.getLastSegment().EndTimestamp += time;\n    // TODO: can improve perf by not recalculating whole segment, just the last bit of time\n    this.algo.calculateForSegment(this.getLastSegment());\n  }\n\n  private shortenLastSegment(time: number): void {\n    this.getLastSegment().EndTimestamp -= time;\n    // TODO: can improve perf by not recalculating whole segment, just throwing away some of the values instead\n    this.algo.calculateForSegment(this.getLastSegment());\n  }\n\n  private clone(): DiveProfile {\n    const result = new DiveProfile(this.diveSettings, this.diveSegmentFactory);\n    result.algo = this.algo.clone();\n    result.segments = this.segments.map(x => x.clone());\n    return result;\n  }\n\n  private getPreviousSegment(): DiveSegment {\n    return this.segments[this.segments.length - 2];\n  }\n\n  private canSurfaceWithoutStops(): boolean {\n    this.addSegment(\n      this.diveSegmentFactory.createEndDiveSegment(this.getLastSegment().EndTimestamp, this.getLastSegment().EndDepth, this.getLastSegment().Gas)\n    );\n\n    const result = this.getCeilingError().duration === 0;\n    this.removeLastSegment();\n\n    return result;\n  }\n\n  private getSegment(time: number): DiveSegment {\n    return this.segments.find(x => x.EndTimestamp > time && x.StartTimestamp <= time) ?? this.getLastSegment();\n  }\n\n  private getGas(time: number): BreathingGas {\n    return this.getSegment(time).Gas;\n  }\n\n  private getDepth(time: number): number {\n    return this.getSegment(time).getDepth(time);\n  }\n\n  private getEND(time: number): number {\n    if (this.diveSettings.isOxygenNarcotic) {\n      return (this.getPN2(time) + this.getPO2(time) - 1) * 10;\n    }\n\n    return (this.getPN2(time) / 0.79 - 1) * 10;\n  }\n\n  private getWipProfile(newDepth: number, newGas: BreathingGas, timeAtDepth: number): DiveProfile {\n    const wipProfile = this.getCurrentProfile();\n    let depth = wipProfile.getLastSegment().EndDepth;\n    let gas = wipProfile.getLastSegment().Gas;\n\n    if (newDepth !== depth) {\n      wipProfile.addSegment(this.diveSegmentFactory.createDepthChangeSegment(wipProfile.getTotalTime(), depth, newDepth, gas));\n\n      depth = newDepth;\n    }\n\n    if (newGas !== gas) {\n      wipProfile.addSegment(this.diveSegmentFactory.createGasChangeSegment(wipProfile.getTotalTime(), newGas, newDepth));\n      gas = newGas;\n    }\n\n    if (timeAtDepth > 0) {\n      wipProfile.addSegment(this.diveSegmentFactory.createMaintainDepthSegment(wipProfile.getTotalTime(), newDepth, timeAtDepth, newGas));\n    }\n\n    return wipProfile;\n  }\n}\n","import { DiveProfile } from './DiveProfile';\nimport { BreathingGas } from './BreathingGas';\nimport { DiveSegmentFactoryService } from './DiveSegmentFactory.service';\nimport { DiveSettingsService } from './DiveSettings.service';\n\nexport class ChartGeneratorService {\n  constructor(\n    private diveSegmentFactory: DiveSegmentFactoryService,\n    private diveSettings: DiveSettingsService\n  ) {}\n\n  getDepthChartData(diveProfile: DiveProfile): { time: number; depth: number; ceiling: number }[] {\n    const data: { time: number; depth: number; ceiling: number }[] = [];\n\n    for (const segment of diveProfile.segments) {\n      for (let time = segment.StartTimestamp; time <= segment.EndTimestamp; time++) {\n        data.push({ time: time, depth: segment.getDepth(time), ceiling: 0 });\n      }\n    }\n\n    for (const d of data) {\n      d.ceiling = diveProfile.algo.getInstantCeiling(d.time);\n    }\n\n    return data;\n  }\n\n  getPO2ChartData(diveProfile: DiveProfile): { time: number; pO2: number; decoLimit: number; limit: number; min: number }[] {\n    const data: { time: number; pO2: number; decoLimit: number; limit: number; min: number }[] = [];\n\n    for (const segment of diveProfile.segments) {\n      for (let time = segment.StartTimestamp; time <= segment.EndTimestamp; time++) {\n        data.push({\n          time: time,\n          pO2: segment.Gas.getPO2(segment.getDepth(time)),\n          decoLimit: this.diveSettings.decoPO2Maximum,\n          limit: this.diveSettings.workingPO2Maximum,\n          min: this.diveSettings.pO2Minimum,\n        });\n      }\n    }\n\n    return data;\n  }\n\n  getENDChartData(diveProfile: DiveProfile): { time: number; end: number; errorLimit: number }[] {\n    const data: { time: number; end: number; errorLimit: number }[] = [];\n\n    for (const segment of diveProfile.segments) {\n      for (let time = segment.StartTimestamp; time <= segment.EndTimestamp; time++) {\n        data.push({\n          time: time,\n          end: segment.Gas.getEND(segment.getDepth(time)),\n          errorLimit: this.diveSettings.ENDErrorThreshold,\n        });\n      }\n    }\n\n    return data;\n  }\n\n  getTissuesCeilingChartData(diveProfile: DiveProfile): { time: number; depth: number; tissuesCeiling: number[] }[] {\n    const data: {\n      time: number;\n      depth: number;\n      tissuesCeiling: number[];\n    }[] = [];\n\n    for (const segment of diveProfile.segments) {\n      for (let time = segment.StartTimestamp; time <= segment.EndTimestamp; time++) {\n        const ceilings: number[] = [];\n        for (let tissue = 1; tissue <= 16; tissue++) {\n          ceilings.push(diveProfile.algo.getTissueInstantCeiling(time, tissue));\n        }\n\n        data.push({\n          time: time,\n          depth: segment.getDepth(time),\n          tissuesCeiling: ceilings,\n        });\n      }\n    }\n\n    return data;\n  }\n\n  getTissuesPN2ChartData(diveProfile: DiveProfile): { time: number; gasPN2: number; tissuesPN2: number[] }[] {\n    const data: {\n      time: number;\n      gasPN2: number;\n      tissuesPN2: number[];\n    }[] = [];\n\n    for (let time = 0; time <= diveProfile.getTotalTime(); time++) {\n      const tissuesPN2: number[] = [];\n      for (let tissue = 1; tissue <= 16; tissue++) {\n        tissuesPN2.push(diveProfile.algo.getTissuePN2(time, tissue));\n      }\n\n      data.push({\n        time: time,\n        gasPN2: diveProfile.getPN2(time),\n        tissuesPN2,\n      });\n    }\n\n    return data;\n  }\n\n  getTissuesPHeChartData(diveProfile: DiveProfile): { time: number; gasPHe: number; tissuesPHe: number[] }[] {\n    const data: {\n      time: number;\n      gasPHe: number;\n      tissuesPHe: number[];\n    }[] = [];\n\n    for (let time = 0; time <= diveProfile.getTotalTime(); time++) {\n      const tissuesPHe: number[] = [];\n      for (let tissue = 1; tissue <= 16; tissue++) {\n        tissuesPHe.push(diveProfile.algo.getTissuePHe(time, tissue));\n      }\n\n      data.push({\n        time: time,\n        gasPHe: diveProfile.getPHe(time),\n        tissuesPHe,\n      });\n    }\n\n    return data;\n  }\n\n  getCeilingChartData(newDepth: number, newGas: BreathingGas, diveProfile: DiveProfile): { time: number; ceiling: number }[] {\n    const data: { time: number; ceiling: number }[] = [];\n\n    const wipProfile = diveProfile.getCurrentProfile();\n\n    wipProfile.addSegment(\n      this.diveSegmentFactory.createDepthChangeSegment(wipProfile.getTotalTime(), diveProfile.getCurrentDepth(), newDepth, diveProfile.getCurrentGas())\n    );\n\n    const startTime = wipProfile.getTotalTime();\n    const chartDuration = 3600 * 2; // 2 hours\n\n    wipProfile.addSegment(this.diveSegmentFactory.createMaintainDepthSegment(wipProfile.getTotalTime(), newDepth, chartDuration, newGas));\n\n    for (let time = startTime; time < startTime + chartDuration; time++) {\n      data.push({ time: time - startTime, ceiling: wipProfile.algo.getInstantCeiling(time) });\n    }\n\n    return data;\n  }\n}\n","import { BreathingGas } from './BreathingGas';\nimport { DiveSegment } from './DiveSegment';\nimport { DiveSegmentFactoryService } from './DiveSegmentFactory.service';\nimport { DiveProfile } from './DiveProfile';\nimport { DiveSettingsService } from './DiveSettings.service';\nimport { ChartGeneratorService } from './ChartGenerator.service';\n\nexport class DivePlannerService {\n  private diveID = crypto.randomUUID();\n  private diveProfile: DiveProfile;\n  private chartGenerator: ChartGeneratorService;\n  private diveSegmentFactory: DiveSegmentFactoryService;\n\n  constructor(\n    public settings: DiveSettingsService\n  ) {\n    this.diveSegmentFactory = new DiveSegmentFactoryService(settings);\n    this.chartGenerator = new ChartGeneratorService(this.diveSegmentFactory, settings);\n    this.diveProfile = new DiveProfile(settings, this.diveSegmentFactory);\n    BreathingGas.GenerateStandardGases(settings);\n  }\n\n  getStandardGases(): BreathingGas[] {\n    return BreathingGas.StandardGases;\n  }\n\n  startDive(startGas: BreathingGas) {\n    this.diveProfile = new DiveProfile(this.settings, this.diveSegmentFactory);\n    this.diveProfile.startDive(startGas);\n    this.diveID = crypto.randomUUID();\n  }\n\n  getDiveSegments(): DiveSegment[] {\n    return this.diveProfile.segments;\n  }\n\n  getDiveDuration(): number {\n    return this.diveProfile.getTotalTime();\n  }\n\n  getMaxDepth(): number {\n    return this.diveProfile.getMaxDepth();\n  }\n\n  getAverageDepth(): number {\n    return this.diveProfile.getAverageDepth();\n  }\n\n  getCurrentDepth(): number {\n    return this.diveProfile.getCurrentDepth();\n  }\n\n  getOptimalDecoGas(depth: number): BreathingGas {\n    return BreathingGas.getOptimalDecoGas(depth, this.settings);\n  }\n\n  getCurrentCeiling(): number {\n    return this.diveProfile.getCurrentCeiling();\n  }\n\n  getCurrentInstantCeiling(): number {\n    return this.diveProfile.getCurrentInstantCeiling();\n  }\n\n  getCurrentGas(): BreathingGas {\n    return this.diveProfile.getCurrentGas();\n  }\n\n  getCurrentDiveTime(): number {\n    return this.diveProfile.getCurrentDiveTime();\n  }\n\n  getNoDecoLimit(newDepth: number, newGas: BreathingGas, timeAtDepth: number): number | undefined {\n    return this.diveProfile.getNoDecoLimit(newDepth, newGas, timeAtDepth);\n  }\n\n  addChangeDepthSegment(newDepth: number): void {\n    this.diveProfile.addChangeDepthSegment(newDepth);\n  }\n\n  addChangeGasSegment(newGas: BreathingGas): void {\n    this.diveProfile.addChangeGasSegment(newGas);\n  }\n\n  addMaintainDepthSegment(timeAtDepth: number): void {\n    this.diveProfile.addMaintainDepthSegment(timeAtDepth);\n  }\n\n  getTravelTime(newDepth: number): number {\n    return this.diveProfile.getTravelTime(newDepth);\n  }\n\n  getDepthChartData(): { time: number; depth: number; ceiling: number }[] {\n    return this.chartGenerator.getDepthChartData(this.diveProfile);\n  }\n\n  getPO2ChartData(): { time: number; pO2: number; decoLimit: number; limit: number; min: number }[] {\n    return this.chartGenerator.getPO2ChartData(this.diveProfile);\n  }\n\n  getENDChartData(): { time: number; end: number; errorLimit: number }[] {\n    return this.chartGenerator.getENDChartData(this.diveProfile);\n  }\n\n  getTissuesCeilingChartData(): { time: number; depth: number; tissuesCeiling: number[] }[] {\n    return this.chartGenerator.getTissuesCeilingChartData(this.diveProfile);\n  }\n\n  getTissuesPN2ChartData(): { time: number; gasPN2: number; tissuesPN2: number[] }[] {\n    return this.chartGenerator.getTissuesPN2ChartData(this.diveProfile);\n  }\n\n  getTissuesPHeChartData(): { time: number; gasPHe: number; tissuesPHe: number[] }[] {\n    return this.chartGenerator.getTissuesPHeChartData(this.diveProfile);\n  }\n\n  getCeilingChartData(newDepth: number, newGas: BreathingGas): { time: number; ceiling: number }[] {\n    return this.chartGenerator.getCeilingChartData(newDepth, newGas, this.diveProfile);\n  }\n\n  getNewCeiling(newDepth: number, timeAtDepth: number): number {\n    return this.diveProfile.getNewCeiling(newDepth, timeAtDepth);\n  }\n\n  getNewInstantCeiling(newDepth: number, timeAtDepth: number): number {\n    return this.diveProfile.getNewInstantCeiling(newDepth, timeAtDepth);\n  }\n\n  getCeilingError(): { amount: number; duration: number } {\n    return this.diveProfile.getCeilingError();\n  }\n\n  getPO2Error(): { maxPO2: number; duration: number } {\n    return this.diveProfile.getPO2Error();\n  }\n\n  getHypoxicError(): { minPO2: number; duration: number } {\n    return this.diveProfile.getHypoxicError();\n  }\n\n  getENDError(): { end: number; duration: number } {\n    return this.diveProfile.getENDError();\n  }\n\n  getPO2WarningMessage(pO2: number): string | undefined {\n    if (pO2 > this.settings.workingPO2Maximum && pO2 <= this.settings.decoPO2Maximum)\n      return `Oxygen partial pressure should only go above ${this.settings.workingPO2Maximum} during deco stops`;\n    return undefined;\n  }\n\n  getPO2ErrorMessage(pO2: number): string | undefined {\n    if (pO2 > this.settings.decoPO2Maximum) return `Oxygen partial pressure should never go above ${this.settings.decoPO2Maximum}`;\n    if (pO2 < this.settings.pO2Minimum) return `Oxygen partial pressure should never go below ${this.settings.pO2Minimum}`;\n    return undefined;\n  }\n\n  getENDErrorMessage(END: number): string | undefined {\n    if (END > this.settings.ENDErrorThreshold) return this.settings.ENDErrorMessage;\n    return undefined;\n  }\n}\n","export class DiveSettingsService {\n  private _ascentRate = 10;\n  private _descentRate = 20;\n  private _isOxygenNarcotic = true;\n  private _workingPO2Maximum = 1.4;\n  private _decoPO2Maximum = 1.6;\n  private _pO2Minimum = 0.18;\n  private _ENDErrorThreshold = 30;\n  private _subscribers: (() => void)[] = [];\n\n  subscribeToChanges(callback: () => void): void {\n    this._subscribers.push(callback);\n  }\n\n  private onSettingChange(): void {\n    this._subscribers.forEach(x => x());\n  }\n\n  set ascentRate(rate: number) {\n    this._ascentRate = rate;\n    this.onSettingChange();\n  }\n\n  get ascentRate(): number {\n    return this._ascentRate;\n  }\n\n  set descentRate(rate: number) {\n    this._descentRate = rate;\n    this.onSettingChange();\n  }\n\n  get descentRate(): number {\n    return this._descentRate;\n  }\n\n  set isOxygenNarcotic(isNarcotic: boolean) {\n    this._isOxygenNarcotic = isNarcotic;\n    this.onSettingChange();\n  }\n\n  get isOxygenNarcotic(): boolean {\n    return this._isOxygenNarcotic;\n  }\n\n  set workingPO2Maximum(threshold: number) {\n    this._workingPO2Maximum = threshold;\n    this.onSettingChange();\n  }\n\n  get workingPO2Maximum(): number {\n    return this._workingPO2Maximum;\n  }\n\n  set decoPO2Maximum(threshold: number) {\n    this._decoPO2Maximum = threshold;\n    this.onSettingChange();\n  }\n\n  get decoPO2Maximum(): number {\n    return this._decoPO2Maximum;\n  }\n\n  get pO2Minimum(): number {\n    return this._pO2Minimum;\n  }\n\n  set pO2Minimum(value: number) {\n    this._pO2Minimum = value;\n    this.onSettingChange();\n  }\n\n  set ENDErrorThreshold(threshold: number) {\n    this._ENDErrorThreshold = threshold;\n    this.onSettingChange();\n  }\n\n  get ENDErrorThreshold(): number {\n    return this._ENDErrorThreshold;\n  }\n\n  get ENDErrorMessage(): string {\n    return `END is above the configured error threshold of ${this._ENDErrorThreshold}m`;\n  }\n\n  get MaxDepthPO2Tooltip(): string {\n    return `Maximum depth this gas can be breathed at without going over an oxygen partial pressure of ${this.workingPO2Maximum} (${this.decoPO2Maximum} for deco stops)`;\n  }\n\n  get MaxDepthENDTooltip(): string {\n    return `Maximum depth this gas can be breathed at before you experience narcosis equivalent to ${this._ENDErrorThreshold}m on air`;\n  }\n\n  get MinDepthTooltip(): string {\n    return `Minimum depth this gas can be breathed at before you experience hypoxia (PO2 < ${this.pO2Minimum})`;\n  }\n}\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5]}